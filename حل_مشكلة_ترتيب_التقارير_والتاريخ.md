# ุญู ูุดููุฉ ุชุฑุชูุจ ุงูุชูุงุฑูุฑ ูุนุฑุถ ุงูุชุงุฑูุฎ

## ๐ ุงููุดุงูู ุงูููุชุดูุฉ

### 1. ูุดููุฉ ุชุฑุชูุจ ุงูุชูุงุฑูุฑ
- ุงูุชูุงุฑูุฑ ุงูุฌุฏูุฏุฉ ุชุธูุฑ ูู ุงููุณุท ูููุณ ูู ุงูุฃูู
- ุงูุชุฑุชูุจ ูุง ูุนูุณ ุชุงุฑูุฎ ุงูุฅูุดุงุก ุงููุนูู

### 2. ูุดููุฉ ุนุฑุถ ุงูุชุงุฑูุฎ
- ุงูุชุงุฑูุฎ ูุง ูุธูุฑ ุจุงูุนุฑุถ ุงููุงูู
- ุงูุชูุงุฑูุฎ ุชุธูุฑ ุจุตูุบุฉ ุบูุฑ ููุฑูุกุฉ

## ๐๏ธ ุงูุญููู ุงููุทุจูุฉ

### 1. ุฅุถุงูุฉ ุญูู createdAt ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### ูู `backend/prisma/schema.prisma`:
```prisma
model Report {
  id          String   @id @default(cuid())
  title       String
  summary     String?
  pdfUrl      String?
  thumbnail   String?
  publishDate DateTime @default(now())
  status      String   @default("draft")
  content     String?
  createdAt   DateTime @default(now())  // ุชู ุฅุถุงูุฉ ูุฐุง ุงูุญูู
}
```

#### ุฅูุดุงุก Migration:
```bash
cd backend
npx prisma migrate dev --name add_created_at_to_reports
```

### 2. ุชุนุฏูู ุชุฑุชูุจ ุงูุชูุงุฑูุฑ ูู ุงูุฎุงุฏู

#### ูู `backend/src/controllers/reportController.js`:
```javascript
// GET /api/reports
async function getAllReports(req, res) {
  try {
    const reports = await prisma.report.findMany({ 
      orderBy: { 
        createdAt: 'desc'  // ุชุฑุชูุจ ุญุณุจ ุชุงุฑูุฎ ุงูุฅูุดุงุก ุจุฏูุงู ูู ุชุงุฑูุฎ ุงููุดุฑ
      } 
    });
    res.json(reports);
  } catch (err) {
    console.error('Get All Reports Error:', err);
    res.status(500).json({ error: 'ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุฌูุจ ุงูุชูุงุฑูุฑ' });
  }
}
```

### 3. ุชุญุณูู ุนุฑุถ ุงูุชุงุฑูุฎ ูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ

#### ูู `frontend/src/pages/admin/ReportsManagement.js`:
```javascript
const columns = [
  { title: 'ุงูุนููุงู', dataIndex: 'title', key: 'title' },
  { title: 'ุงูููุฎุต', dataIndex: 'summary', key: 'summary' },
  { 
    title: 'ุชุงุฑูุฎ ุงููุดุฑ', 
    dataIndex: 'publishDate', 
    key: 'publishDate',
    render: (date) => {
      if (!date) return '-';
      try {
        const dateObj = new Date(date);
        return dateObj.toLocaleDateString('ar-SA', {
          year: 'numeric',
          month: 'long',
          day: 'numeric',
          hour: '2-digit',
          minute: '2-digit'
        });
      } catch (e) {
        return date;
      }
    }
  },
  { 
    title: 'ุชุงุฑูุฎ ุงูุฅูุดุงุก', 
    dataIndex: 'createdAt', 
    key: 'createdAt',
    render: (date) => {
      if (!date) return '-';
      try {
        const dateObj = new Date(date);
        return dateObj.toLocaleDateString('ar-SA', {
          year: 'numeric',
          month: 'long',
          day: 'numeric',
          hour: '2-digit',
          minute: '2-digit'
        });
      } catch (e) {
        return date;
      }
    }
  },
  { title: 'ุงูุญุงูุฉ', dataIndex: 'status', key: 'status' },
  // ... ุจุงูู ุงูุฃุนูุฏุฉ
];
```

## ๐ง ุฎุทูุงุช ุงูุชุญูู

### 1. ุชุทุจูู Migration
```bash
cd backend
npx prisma migrate dev
```

### 2. ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุงุฏู
```bash
npm start
```

### 3. ุงุฎุชุจุงุฑ ุงูุชุฑุชูุจ
```bash
node test_report_ordering.js
```

### 4. ุงูุชุญูู ูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ
- ุงุฐูุจ ุฅูู ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุชูุงุฑูุฑ
- ุชุญูู ูู ุฃู ุงูุชูุงุฑูุฑ ูุฑุชุจุฉ ุญุณุจ ุชุงุฑูุฎ ุงูุฅูุดุงุก (ุงูุฃุญุฏุซ ุฃููุงู)
- ุชุญูู ูู ุฃู ุงูุชูุงุฑูุฎ ุชุธูุฑ ุจุงูุนุฑุถ ุงููุงูู

## ๐งช ุงุฎุชุจุงุฑ ุงูุชุฑุชูุจ

### ุชุดุบูู ุงูุงุฎุชุจุงุฑ:
```bash
node test_report_ordering.js
```

### ุงููุชุงุฆุฌ ุงููุชููุนุฉ:
- โ ุงูุชูุงุฑูุฑ ูุฑุชุจุฉ ุญุณุจ ุชุงุฑูุฎ ุงูุฅูุดุงุก (ุงูุฃุญุฏุซ ุฃููุงู)
- โ ุงูุชูุงุฑูุฎ ุชุธูุฑ ุจุงูุนุฑุถ ุงููุงูู ุจุงููุบุฉ ุงูุนุฑุจูุฉ
- โ ุงูุชูุงุฑูุฑ ุงูุฌุฏูุฏุฉ ุชุธูุฑ ูู ุงูุฃุนูู

## ๐ ุงูุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ูุญุต ุงูุชูุงุฑูุฑ ูุน ุงูุชูุงุฑูุฎ:
```sql
SELECT 
  id, 
  title, 
  "createdAt", 
  "publishDate", 
  status 
FROM "Report" 
ORDER BY "createdAt" DESC 
LIMIT 10;
```

### ุงูุชุญูู ูู ูุฌูุฏ ุญูู createdAt:
```sql
SELECT column_name, data_type 
FROM information_schema.columns 
WHERE table_name = 'Report' 
AND column_name = 'createdAt';
```

## ๐ฏ ุงููุชูุฌุฉ ุงููุชููุนุฉ

ุจุนุฏ ุชุทุจูู ูุฐู ุงูุฅุตูุงุญุงุช:

### 1. ุชุฑุชูุจ ุงูุชูุงุฑูุฑ
- โ ุงูุชูุงุฑูุฑ ุงูุฌุฏูุฏุฉ ุชุธูุฑ ูู ุงูุฃุนูู
- โ ุงูุชุฑุชูุจ ุญุณุจ ุชุงุฑูุฎ ุงูุฅูุดุงุก ุงููุนูู
- โ ุงูุชุญุฏูุซุงุช ุงูููุฑูุฉ ุนูุฏ ุฅุถุงูุฉ ุชูุฑูุฑ ุฌุฏูุฏ

### 2. ุนุฑุถ ุงูุชุงุฑูุฎ
- โ ุงูุชูุงุฑูุฎ ุชุธูุฑ ุจุงูุนุฑุถ ุงููุงูู
- โ ุงูุชูุณูู ุจุงููุบุฉ ุงูุนุฑุจูุฉ
- โ ุนุฑุถ ุงูุณุงุนุฉ ูุงูุฏูููุฉ
- โ ูุนุงูุฌุฉ ุงูุชูุงุฑูุฎ ุงููุงุฑุบุฉ

### 3. ูุนูููุงุช ุฅุถุงููุฉ
- โ ุนููุฏ ูููุตู ูุชุงุฑูุฎ ุงูุฅูุดุงุก
- โ ุนููุฏ ูููุตู ูุชุงุฑูุฎ ุงููุดุฑ
- โ ุชูููุฒ ูุงุถุญ ุจูู ุงูุชุงุฑูุฎูู

## ๐ ูู ุญุงูุฉ ุงุณุชูุฑุงุฑ ุงููุดููุฉ

### 1. ุงูุชุญูู ูู Migration
```bash
cd backend
npx prisma migrate status
```

### 2. ุฅุนุงุฏุฉ ุชูููุฏ Prisma Client
```bash
npx prisma generate
```

### 3. ูุญุต ูุงุนุฏุฉ ุงูุจูุงูุงุช
```bash
npx prisma studio
```

### 4. ุชูุธูู ูุฅุนุงุฏุฉ ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช (ุฅุฐุง ูุฒู ุงูุฃูุฑ)
```bash
npx prisma migrate reset
```

## ๐ก ููุงุญุธุงุช ูููุฉ

1. **ุญูู createdAt**: ูุชู ุฅูุดุงุคู ุชููุงุฆูุงู ุนูุฏ ุฅูุดุงุก ุงูุชูุฑูุฑ
2. **ุญูู publishDate**: ูููู ุชุนุฏููู ูุฏููุงู ูู ูุจู ุงููุณุชุฎุฏู
3. **ุงูุชุฑุชูุจ**: ูุนุชูุฏ ุนูู createdAt ูููุณ publishDate
4. **ุงูุชูุณูู**: ูุณุชุฎุฏู ุงูุชูุณูู ุงูุนุฑุจู ูุน ุงูุณุงุนุฉ ูุงูุฏูููุฉ 